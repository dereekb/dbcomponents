<div class="dbx-source-select-field">
  <div class="dbx-source-select-field-content">
    <mat-select class="dbx-source-select-field-select" [id]="id" [formControl]="formControl" [multiple]="props.multiple">
      <mat-option *ngFor="let value of nonGroupedValues$ | async" [value]="value.value">
        {{ value.label }}
      </mat-option>
      <mat-optgroup *ngFor="let optionGroup of groupedOptions$ | async" [label]="optionGroup.label">
        <mat-option *ngFor="let value of optionGroup.values" [value]="value.value">
          {{ value.label }}
        </mat-option>
      </mat-optgroup>
    </mat-select>
    <ng-container *ngIf="showOpenSourceButton">
      <dbx-button-spacer></dbx-button-spacer>
      <dbx-action dbxActionValue [dbxActionHandler]="handleSelectOptions" class="dbx-source-select-field-button">
        <dbx-button dbxActionButton [iconOnly]="true" [icon]="selectButtonIcon"></dbx-button>
      </dbx-action>
    </ng-container>
  </div>
  <dbx-loading class="dbx-source-select-field-loading" [linear]="true" [context]="context"></dbx-loading>
</div>
