@use "sass:map";
@use './variables';

// theme
@function define-dbx-theme-config($theme-config, $input-dbx-theme-config: ()) {

  @if ($input-dbx-theme-config == null) {
    $input-dbx-theme-config: ();
  }

  $dbx-screen: define-dbx-screen-config(map.get($input-dbx-theme-config, 'screen'));
  $dbx-layout: define-dbx-layout-config(map.get($input-dbx-theme-config, 'layout'));

  $dbx-theme-config: (
    'screen': $dbx-screen,
    'layout': $dbx-layout
  );

  @return map.merge($theme-config, (
    'dbx': $dbx-theme-config
  ));
}

@function get-dbx-theme-config($theme-config) {
  @return map.get($theme-config, 'dbx');
}

// screen
@function define-dbx-screen-config($input-dbx-theme-screen-config: null) {
  $dbx-screen-config: (
    'mobile': 360px,      // 0-360px
    'small': 520px,       //361-520px
    'medium': 768px,      //521-768px
    'large': 1280px,      //769-1280px
    'tiny-vertical': 280  //0-280px
  );

  @if ($input-dbx-theme-screen-config != null) {
    $dbx-screen-config: map.merge($dbx-screen-config, $input-dbx-theme-screen-config);
  }

  @return $dbx-screen-config;
}

@function get-dbx-screen-config($theme-config) {
  @return map.get(get-dbx-theme-config($theme-config), 'screen');
}

// layout
@function define-dbx-layout-config($input-dbx-theme-layout-config: null) {
  $dbx-layout-config: (
    // selector
    // 'selector': 'dbx-app',          // root selector to apply variables to.
    // banner
    'top-banner-var': --dbx-top-banner-height,
    'bottom-banner-var': --dbx-bottom-banner-height,
    // app
    'app-height-var': --dbx-app-height,
    // navbars
    'main-navbar-height': 42px,     // initial main navbar height
    'content-navbar-height': 54px,  // initial content navbar height
    // content
    'box-max-width': 600px,         // max width of box content, such as popups.
    'content-max-width': 1200px,    // max width of restricted-width content
    // padding
    'padding-0': 0px,
    'padding-1': 2px,
    'padding-2': 6px,
    'padding-3': 12px,
    'padding-4': 18px,
    'padding-5': 24px
  );

  @if ($input-dbx-theme-layout-config != null) {
    $dbx-layout-config: map.merge($dbx-layout-config, $input-dbx-theme-layout-config);
  }

  @return $dbx-layout-config;
}

@function get-dbx-layout-config($theme-config) {
  @return map.get(get-dbx-theme-config($theme-config), 'layout');
}

@function get-dbx-layout-config-var($theme-config, $item) {
  @return map.get(get-dbx-layout-config($theme-config), $item);
}

@function get-dbx-layout-main-navbar-initial-height($theme-config) {
  @return get-dbx-layout-config-var($theme-config, 'main-navbar-height');
}

@function get-dbx-layout-content-navbar-initial-height($theme-config) {
  @return get-dbx-layout-config-var($theme-config, 'content-navbar-height');
}

@function get-dbx-layout-content-max-width($theme-config) {
  @return get-dbx-layout-config-var($theme-config, 'content-max-width');
}

@function get-dbx-layout-box-max-width($theme-config) {
  @return get-dbx-layout-config-var($theme-config, 'box-max-width');
}

@function get-dbx-layout-padding($theme-config, $padding-level) {
  @return get-dbx-layout-config-var($theme-config, 'padding-'+ $padding-level);
}
