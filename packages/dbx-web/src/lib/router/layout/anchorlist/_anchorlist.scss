@use 'sass:map';
@use 'sass:color';
@use '../../../style/theming';

// MARK: Variables
$anchor-list-item-disabled-item-opacity: 25%;
$active-root-item-left-padding: 2px;
$active-child-item-left-padding: 5px;

// MARK: Mixin
@mixin core() {}

@mixin color($theme-config) {
  $color-config: theming.get-color-config($theme-config);
  $background: map.get($color-config, 'background');
  $background-hover-color: theming.get-color-from-palette($background, 'hover');
  $background-disabled-color: theming.get-color-from-palette($background, 'contrast');

  .dbx-anchor-list.mat-nav-list {

    // MARK: Muting
    // items that are not active are muted
    .mat-list-item {
      opacity: 0.74;

      &.mat-list-item-disabled {
        opacity: $anchor-list-item-disabled-item-opacity;
        background: transparent;
      }
    }

    // active route as a parent
    .dbx-anchor-active {
      .mat-list-item {
        opacity: 0.9;
      }
    }

    // active route
    .dbx-anchor-active-eq {
      .mat-list-item {
        opacity: 1;
        background: color.scale($color:$background-hover-color, $alpha: 25%);
      }
    }

    // MARK: Anchor Tree
    /*
    .dbx-anchor-list-root {
      // nothing
    }
    */

    .dbx-anchor-list-child {
      background: color.scale($background-hover-color, $alpha: 10%);
    }

  }

}

@mixin typography($typography-config) {

  .dbx-anchor-list.mat-nav-list {

    .mat-list-item .mat-list-icon {
      font-size: 28px;
      width: 28px;
      height: 28px;
      padding: $active-root-item-left-padding;
    }

    // MARK: Anchor Tree
    .dbx-anchor-list-child {
      font-size: 0.875em;

      .mat-list-icon {
        font-size: 22px;
        width: 22px;
        height: 22px;
        padding: $active-child-item-left-padding;
      }
    }

  }

}

@mixin theme($theme-config) {
  @include theming.private-check-duplicate-theme-styles($theme-config, 'dbx-router-anchorlist') {
    $color: theming.get-color-config($theme-config);
    $typography: theming.get-typography-config($theme-config);

    @if $color !=null {
      @include color($theme-config);
    }

    @if $typography !=null {
      @include typography($typography);
    }
  }
}
