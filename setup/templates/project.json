{
  "prefix": "workspace",
  "targets": {
    "build-all": {
      "executor": "@nrwl/workspace:run-commands",
      "options": {
        "commands": [
          {
            "description": "build the base of all projects seqentially.",
            "command": "npx nx run-many --target=build-base --parallel --max-parallel=3"
          },
          {
            "description": "build each of the projects that need to be built in a sequential order",
            "command": "npx nx run-many --target=build --parallel=false"
          }
        ],
        "color": true,
        "parallel": false
      }
    },
    "version": {
      "executor": "@jscutlery/semver:version",
      "options": {
        "baseBranch": "main",
        "tagPrefix": "v",
        "syncVersions": true,
        "commitMessageFormat": "release(${projectName}): v${version} release"
      }
    },
    "deploy-firebase-rules": {
      "executor": "@nrwl/workspace:run-commands",
      "options": {
        "command": "npx firebase --project=default deploy --only firestore:rules,storage"
      }
    },
    "ci-deploy-firebase-rules": {
      "executor": "@nrwl/workspace:run-commands",
      "options": {
        "command": "npx firebase --project=default deploy --only firestore:rules,storage --token \"$FIREBASE_TOKEN\""
      }
    }
  }
}
